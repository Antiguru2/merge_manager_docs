# –û–±–∑–æ—Ä –ø–æ–¥–º–æ–¥—É–ª—è merge_manager

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
`merge_manager` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–∞–ø–∏—Å–µ–π –≤ Django‚Äë–ø—Ä–æ–µ–∫—Ç–∞—Ö Cargo Calc. –ú–æ–¥—É–ª—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ç–æ—á–µ—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö ¬´–æ–¥–∏–Ω –ø—Ä–∏—ë–º–Ω–∏–∫ + –æ–¥–∏–Ω –¥–æ–Ω–æ—Ä¬ª —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –∞—É–¥–∏—Ç–æ–º.

## üß≠ –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ –ø–æ–¥–º–æ–¥—É–ª—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç `cargo_calc`
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö ORM Django –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–º–∏ —Å—É–±–º–æ–¥—É–ª—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `data_connector`, `price_manager`) –¥–ª—è –Ω–∞–≤–µ–¥–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞—Ö
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π, –¥–æ—Å—Ç—É–ø–Ω—ã–π —á–µ—Ä–µ–∑ Django Admin, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å data steward –∫–æ–º–∞–Ω–¥–æ–π

## üèóÔ∏è –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Config & Registry** (`config.py`) ‚Äî –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è merge‚Äë–ø—Ä–æ—Ñ–∏–ª–µ–π –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- **Settings Proxy** (`settings.py`) ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ `MERGE_MANAGER_SETTINGS`
- **Merge Service** (`services/merge.py`) ‚Äî —è–¥—Ä–æ –ª–æ–≥–∏–∫–∏ —Å–ª–∏—è–Ω–∏—è, –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å–≤—è–∑–µ–π –∏ soft-delete
- **Field Strategies** (`services/strategies.py`) ‚Äî –Ω–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (target, donor, non-null, concat)
- **Audit Layer** (`models.MergeOperation`) ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Ñ–∞–∫—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø–æ–ª—è –∏ –∏—Ç–æ–≥ —Å—Ç–∞—Ç—É—Å–∞
- **Admin UI** (`admin.py`) ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–ª–∏—è–Ω–∏–π

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–ø–µ—Ä–∞—Ü–∏–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ –∫–æ–¥ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞—Ä—É –∑–∞–ø–∏—Å–µ–π –∏ –ø—Ä–æ—Ñ–∏–ª—å —Å–ª–∏—è–Ω–∏—è
2. `MergeService` —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è (—Å —É—á—ë—Ç–æ–º overrides)
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è dry-run (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∏–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ
4. –í—Å–µ FK/M2M —Å–≤—è–∑–∏ –¥–æ–Ω–æ—Ä–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
5. –î–æ–Ω–æ—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è –ø–æ soft-delete –ø–æ–ª—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `is_active=False`)
6. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `MergeOperation` —Å–æ —Å–≤–æ–¥–∫–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üìå –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|-------------|--------|
| Merge ¬´1 –ø—Ä–∏—ë–º–Ω–∏–∫ + 1 –¥–æ–Ω–æ—Ä¬ª | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ü–µ—Ä–µ–Ω–æ—Å FK / M2M —Å–≤—è–∑–µ–π | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Soft-delete –¥–æ–Ω–æ—Ä–∞ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Dry-run —Ä–µ–∂–∏–º | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –∑–∞–ø–∏—Å–µ–π | ‚è≥ –í –ø–ª–∞–Ω–∞—Ö |
| API (REST/GraphQL) | ‚è≥ –í –ø–ª–∞–Ω–∞—Ö |
| Fuzzy matching –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ | ‚è≥ –í –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö |
| –ú—É–ª—å—Ç–∏-–¥–æ–Ω–æ—Ä—ã | ‚è≥ –í –±—ç–∫–ª–æ–≥–µ |

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è: `docs/plans/merge_manager_plan.md`
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: `merge_manager/docs/setup.md`, `merge_manager/docs/guides/`
- –¢–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞: `merge_manager/tests.py`

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–∏—Å–∫–∏
- –ù—É–∂–Ω–∞ —Ä—É—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ soft-delete –≤ –º–æ–¥–µ–ª—è—Ö –¥–æ–º–µ–Ω–∞
- –°–µ—Ä–≤–∏—Å –ø–æ–∫–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–Ω–æ—Ä–∞–º–∏ –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–æ–π –æ—á–µ—Ä–µ–¥–µ–π
