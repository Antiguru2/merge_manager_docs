# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å merge_manager

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **Python:** 3.10 –∏–ª–∏ –≤—ã—à–µ
- **Django:** 4.2 –∏–ª–∏ –≤—ã—à–µ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ Cargo Calc)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) –∏–ª–∏ PostgreSQL (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã:
- `django.contrib.contenttypes`
- `django.contrib.admin`

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Django
- –î–æ—Å—Ç—É–ø –∫ Django Admin (–¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∂—É—Ä–Ω–∞–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏–π)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
pip install -r req.txt
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** merge_manager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Django –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

### –®–∞–≥ 2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ `merge_manager` –≤ `INSTALLED_APPS`:

```python
# cargo_calc/settings.py
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    # ... –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ...
    
    'merge_manager',  # –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
]
```

### –®–∞–≥ 3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. `python manage.py makemigrations merge_manager`
2. `python manage.py migrate merge_manager`

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `merge_manager_mergeoperation` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.

### –®–∞–≥ 4. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–î–æ–±–∞–≤—å—Ç–µ –≤ `settings.py` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
# cargo_calc/settings.py
MERGE_MANAGER_SETTINGS = {
    "PROFILES": [],  # –ë—É–¥–µ–º –∑–∞–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –Ω–∏–∂–µ
    "DRY_RUN_DEFAULT": False,
    "SOFT_DELETE_FIELD": "is_active",
    "SOFT_DELETE_VALUE": False,
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π —Å–ª–∏—è–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å

–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–æ–¥–µ–ª–∏ `main.City`:

```python
# cargo_calc/settings.py
MERGE_MANAGER_SETTINGS["PROFILES"].append({
    "label": "city",                    # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è
    "model": "main.City",               # –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏: app_label.ModelName
    "fields": {
        "name": {"strategy": "prefer_target"},      # –û—Å—Ç–∞–≤–∏—Ç—å –∏–º—è –ø—Ä–∏—ë–º–Ω–∏–∫–∞
        "code": {"strategy": "prefer_non_null"},    # –í–∑—è—Ç—å –Ω–µ–ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        "population": {"strategy": "prefer_donor"}, # –í–∑—è—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ –¥–æ–Ω–æ—Ä–∞
    },
    "soft_delete_field": "is_active",   # –ü–æ–ª–µ –¥–ª—è –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    "soft_delete_value": False,         # –ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –¥–æ–Ω–æ—Ä–∞
})
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª—é—á–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ

| –ö–ª—é—á | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------------|----------|
| `label` | ‚úÖ | –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∏–∑ –∫–æ–¥–∞ |
| `model` | ‚úÖ | Django –º–æ–¥–µ–ª—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `"app_label.ModelName"` |
| `fields` | ‚úÖ | –°–ª–æ–≤–∞—Ä—å –ø—Ä–∞–≤–∏–ª —Å–ª–∏—è–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è |
| `soft_delete_field` | ‚ùå | –ò–º—è –ø–æ–ª—è –¥–ª—è soft-delete (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `is_active`) |
| `soft_delete_value` | ‚ùå | –ó–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ–Ω–æ—Ä—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `False`) |
| `hard_delete` | ‚ùå | –ü—Ä–∏ `True` –¥–æ–Ω–æ—Ä —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –±–∞–∑—ã –ø–æ—Å–ª–µ —Å–ª–∏—è–Ω–∏—è |
| `pre_merge_hooks` | ‚ùå | –°–ø–∏—Å–æ–∫ callables, –≤—ã–∑—ã–≤–∞–µ–º—ã—Ö –¥–æ —Å–ª–∏—è–Ω–∏—è |
| `post_merge_hooks` | ‚ùå | –°–ø–∏—Å–æ–∫ callables, –≤—ã–∑—ã–≤–∞–µ–º—ã—Ö –ø–æ—Å–ª–µ —Å–ª–∏—è–Ω–∏—è |

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–ª–µ–π

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `prefer_target` | –û—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—ë–º–Ω–∏–∫–∞ (—Ü–µ–ª–µ–≤–æ–π –∑–∞–ø–∏—Å–∏) |
| `prefer_donor` | –í–∑—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–Ω–æ—Ä–∞ (–æ–±—ä–µ–¥–∏–Ω—è–µ–º–æ–π –∑–∞–ø–∏—Å–∏) |
| `prefer_non_null` | –í–∑—è—Ç—å –Ω–µ–ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É –ø—Ä–∏—ë–º–Ω–∏–∫–∞) |
| `concat` | –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º |

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ concat:**

```python
"description": {
    "strategy": "concat",
    "separator": " | ",  # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
}
```

## üéØ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ Django shell –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–∏—è–Ω–∏–µ –¥–≤—É—Ö –∑–∞–ø–∏—Å–µ–π:

```bash
python manage.py shell
```

```python
from merge_manager.services import MergeService
from main.models import City

# –ü–æ–ª—É—á–∏—Ç–µ –¥–≤–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Å–ª–∏—è–Ω–∏—è
city_primary = City.objects.get(id=1)    # –ü—Ä–∏—ë–º–Ω–∏–∫ (–æ—Å—Ç–∞–Ω–µ—Ç—Å—è)
city_duplicate = City.objects.get(id=2)  # –î–æ–Ω–æ—Ä (–±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á—ë–Ω)

# –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å —Å–ª–∏—è–Ω–∏—è –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è "city"
service = MergeService('city')

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–∏—è–Ω–∏–µ
result = service.merge(target=city_primary, donor=city_duplicate)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
print(f"–°—Ç–∞—Ç—É—Å: {result.status}")
print(f"–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–æ–ª—è: {result.changed_fields}")
print(f"–ü–µ—Ä–µ–Ω–µ—Å—ë–Ω–Ω—ã–µ —Å–≤—è–∑–∏: {result.relations}")
```

### Dry-run —Ä–µ–∂–∏–º (–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä)

–ß—Ç–æ–±—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î:

```python
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ dry-run
result = service.merge(
    target=city_primary, 
    donor=city_duplicate, 
    dry_run=True  # –ù–µ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ
print(f"–°—Ç–∞—Ç—É—Å: {result.status}")  # dry_run
print(f"–ë—É–¥—É—Ç –∏–∑–º–µ–Ω–µ–Ω—ã –ø–æ–ª—è: {result.changed_fields}")
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª—É—á–∞—è

–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```python
result = service.merge(
    target=city_primary,
    donor=city_duplicate,
    field_overrides={
        "name": {"strategy": "prefer_donor"},  # –í–∑—è—Ç—å –∏–º—è –¥–æ–Ω–æ—Ä–∞
    }
)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∂—É—Ä–Ω–∞–ª:

```python
result = service.merge(
    target=city_primary,
    donor=city_duplicate,
    extra_summary={
        "operator": "admin@example.com",
        "reason": "Duplicate found by fuzzy matching",
        "ticket_id": "TASK-123"
    }
)
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Django

–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. `python manage.py check`

–ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫, –∑–Ω–∞—á–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. `python manage.py test merge_manager`

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ, –º–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `merge_manager_mergeoperation` —Å–æ–∑–¥–∞–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Django Admin

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Django Admin: `http://localhost:8000/admin/`
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **¬´Merge operations¬ª**
3. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–∏—è–Ω–∏—è –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏

## ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|---------|
| `ModuleNotFoundError: merge_manager` | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≤ `INSTALLED_APPS` | –î–æ–±–∞–≤—å—Ç–µ `'merge_manager'` –≤ `INSTALLED_APPS` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä |
| `FieldDoesNotExist` –ø—Ä–∏ soft-delete | –í –º–æ–¥–µ–ª–∏ –Ω–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ `soft_delete_field` –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ `is_active` –≤ –º–æ–¥–µ–ª—å |
| `ProfileNotFound` | –ü—Ä–æ—Ñ–∏–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º label –Ω–µ –Ω–∞–π–¥–µ–Ω | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `MERGE_MANAGER_SETTINGS["PROFILES"]` –∏ label –≤ –∫–æ–¥–µ |
| –°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ | –û–ø–µ—á–∞—Ç–∫–∞ –≤ –∫–ª—é—á–µ `strategy` | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è |
| –û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏—è—Ö | –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `contenttypes` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ `INSTALLED_APPS` |

## üéì –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

- **[OVERVIEW.md](OVERVIEW.md)** ‚Äî –∏–∑—É—á–∏—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã
- **[API.md](API.md)** ‚Äî —É–∑–Ω–∞–π—Ç–µ –æ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö MergeService
- **[CHANGELOG.md](CHANGELOG.md)** ‚Äî –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:** –∫–∞–Ω–∞–ª `#cargo-calc-dev` (Slack)
- **–û—à–∏–±–∫–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö:** –∫–æ–º–∞–Ω–¥–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **–£–ª—É—á—à–µ–Ω–∏—è –∏ –∏–¥–µ–∏:** —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∏—Å—å –≤ workspace/tasks/tasks.md

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ UI

–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –∏–ª–∏ –º–µ—Ç–æ–¥ `admin_change_url`:

```python
from django.urls import reverse

class City(models.Model):
    # ... –ø–æ–ª—è –º–æ–¥–µ–ª–∏ ...
    
    @property
    def admin_change_url(self):
        return reverse('admin:main_city_change', args=[self.pk])
```

–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mixin `AdminChangeButtonMixin` (—Å–º. `data_connector/submodules/base_content_objects/mixins.py`) –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ.

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª–∏—è–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –º–æ–¥–µ–ª—å `MergeOperation`. –í—ã –º–æ–∂–µ—Ç–µ:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤ Django Admin
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –º–æ–¥–µ–ª—è–º, —Å—Ç–∞—Ç—É—Å–∞–º, –¥–∞—Ç–∞–º
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–æ–ª–µ `summary`

